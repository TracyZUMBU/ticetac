<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"
      integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w=="
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
      integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/stylesheets/style.css" />
    <title></title>
  </head>
  <body>
    <div class="container">
      <h3>My Tickets :</h3>
      <table class="table table-borderless bg-white">
        <thead>
          <tr>
            <th scope="col">N°</th>
            <th scope="col">Journey</th>
            <th scope="col">Date</th>
            <th scope="col">Departure time</th>
            <th scope="col">Price</th>
          </tr>
        </thead>
        <tbody>
         
          <% 
          let allIdTicket = []
          ticketCart.forEach((ticket) => {
            allIdTicket.push(ticket._id)
            %>
          <tr>
            <th scope="row">1</th>
            <td><%= ticket.departure %> / <%= ticket.arrival %></td>
            <td>02/08/2019</td>
            <td><%= ticket.departuretime %> am</td>
            <td><%= ticket.price %> €</td>
          </tr>
          <% }) %>
          <tr class="total">
            <th scope="row">Total</th>
            <td colspan="3"></td>
            <td><%= getTicketPrice %>€</td>
            
          </tr>
        </tbody>
      </table>

      <!-- Modal -->
      <!-- Button trigger modal -->
      <div class="float-right">
        <a href="/users/allTickets?allTicket[]=<%=allIdTicket%>"
          type="button"
          class="btn btn-danger"
          

        >
          Confirm
        </a>
      </div>

      <!-- Modal -->
      <div
        class="modal fade"
        id="confirmModal"
        tabindex="-1"
        aria-labelledby="modalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header d-flex justify-content-center bg-success">
              <i class="fas fa-check-circle fa-3x"></i>
            </div>
            <div class="modal-body text-center text-muted">
              <h1>Payment Success !</h1>
              <p>We look forward to welcoming you in our trains!</p>
            </div>
            <div class="modal-footer d-flex justify-content-center">
              <a href="/homepage" class="btn btn-info"> Go to Home Page </a>
            </div>
          </div>
        </div>
      </div>
      <!-- /Modal -->
    </div>

    <!-- Bootstrap JS -->
    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
